# ═══════════════════════════════════════════════════════════════
# Life OS - Docker Compose Override for Local Development
# ═══════════════════════════════════════════════════════════════
# Diese Datei wird automatisch mit docker-compose.yml gemergt.
# Enthält lokale Entwicklungs-Overrides.
#
# ⚠️  SECURITY WARNING ⚠️
# This file exposes ports for local development ONLY!
# NEVER use this file in production - it exposes the database directly!
# For production, use: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  # ─────────────────────────────────────────────────────────────
  # Frontend: Nginx Placeholder (bis React App fertig ist)
  # ─────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: lifeos-frontend
    restart: unless-stopped
    volumes:
      - ./frontend/public:/usr/share/nginx/html:ro
    networks:
      - lifeos-net

  # ─────────────────────────────────────────────────────────────
  # Caddy: Lokale TLS Zertifikate
  # ─────────────────────────────────────────────────────────────
  caddy:
    environment:
      - DOMAIN=localhost

  # ─────────────────────────────────────────────────────────────
  # Supabase DB: Direkter Port-Zugriff für Entwicklung
  # ─────────────────────────────────────────────────────────────
  supabase-db:
    ports:
      - "5432:5432"

  # ─────────────────────────────────────────────────────────────
  # Kong: Direkter API-Zugriff
  # ─────────────────────────────────────────────────────────────
  supabase-kong:
    ports:
      - "8000:8000"

  # ─────────────────────────────────────────────────────────────
  # Studio: Direkter Zugriff
  # ─────────────────────────────────────────────────────────────
  supabase-studio:
    ports:
      - "3000:3000"

  # ─────────────────────────────────────────────────────────────
  # n8n: Direkter Zugriff
  # ─────────────────────────────────────────────────────────────
  n8n:
    ports:
      - "5678:5678"
    environment:
      - N8N_PROTOCOL=http
      - WEBHOOK_URL=http://localhost:5678
